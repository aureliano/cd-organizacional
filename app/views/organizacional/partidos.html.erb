<% @page_title = 'Partidos Políticos' %>

<div class="hero-unit">
  <h3>Partidos Políticos</h3>
  <p>Relação dos Partidos políticos ativos e desativados.</p>
</div>

<div class="container">
  <% form_tag '/organizacional/partidos', :method => 'get', :id => 'form_consulta' do %>
    <table>
      <tr>
        <td><label for="situacao">Situação: </label></td>
        <td><select id="situacao_partido" name="situacao_partido">
        <% ['Ativos', 'Extintos', 'Todos'].each do |situacao| %>
        <option value="<%= situacao %>"<%= ' selected' if params[:situacao_partido] == situacao %>><%= situacao %></option>
        <% end %>
        </select></td>
      </tr>
      <tr>
        <td></td>
        <td align="right"><button type="submit" class="btn">Consultar</button></td>
      </tr>
    </table>
  <% end %>

  <%
    fields = [{:title => 'Legenda', :name => 'sigla'}, {:title => 'Nome', :name => 'nome'}]
    fields << {:title => 'Situação', :name => 'situacao'} if params[:situacao_partido] == 'Todos'
  %>

  <%= data_table(:data => @partidos, :total => @total, :seed => 'partido',
      :fields => fields, :detail_path => 'partido/', :field_id => 'sigla').html_safe %>
</div>
